<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WEMBA 51 Pathway Planner</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Newsreader:opsz,wght@6..72,400;6..72,500;6..72,600&family=Source+Sans+3:wght@400;500;600;700&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Cohort Selection Screen / Landing Page -->
  <div id="cohort-selection" class="screen active">
    <!-- Landing Header -->
    <header class="landing-nav">
      <div class="landing-logo">
        <span class="logo-mark">W</span>
        <span class="logo-text">WEMBA</span>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-badge">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
          <polyline points="22 4 12 14.01 9 11.01"/>
        </svg>
        WEMBA 51 Pathway Planner â€¢ Beta
      </div>
      <h1 class="hero-title">WEMBA Pathway Planner</h1>
      <p class="hero-subtitle">Smart tools to simplify your academic planning and ensure you're on track for graduation.</p>

      <p class="hero-instruction">Start planning by selecting your cohort below</p>

      <!-- Cohort Cards -->
      <div class="cohort-cards" id="cohorts">
        <button class="cohort-card" data-cohort="philadelphia">
          <div class="cohort-card-header">
            <span class="cohort-icon">PHL</span>
            <span class="cohort-badge-label">East Coast</span>
          </div>
          <h2>Philadelphia</h2>
          <p class="cohort-description">In-person weekend classes in Philadelphia</p>
          <div class="cohort-stats">
            <div class="cohort-stat">
              <span class="stat-number">22.0 CU</span>
              <span class="stat-label">Available</span>
            </div>
            <div class="cohort-stat">
              <span class="stat-number">19.0 CU</span>
              <span class="stat-label">Required</span>
            </div>
          </div>
          <div class="cohort-card-footer">
            <span class="select-text">Select Philadelphia</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"/>
              <polyline points="12 5 19 12 12 19"/>
            </svg>
          </div>
        </button>

        <button class="cohort-card" data-cohort="san_francisco">
          <div class="cohort-card-header">
            <span class="cohort-icon">SF</span>
            <span class="cohort-badge-label">West Coast</span>
          </div>
          <h2>San Francisco</h2>
          <p class="cohort-description">In-person weekend classes in San Francisco</p>
          <div class="cohort-stats">
            <div class="cohort-stat">
              <span class="stat-number">19.5 CU</span>
              <span class="stat-label">Available</span>
            </div>
            <div class="cohort-stat">
              <span class="stat-number">19.0 CU</span>
              <span class="stat-label">Required</span>
            </div>
          </div>
          <div class="cohort-card-footer">
            <span class="select-text">Select San Francisco</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"/>
              <polyline points="12 5 19 12 12 19"/>
            </svg>
          </div>
        </button>

        <button class="cohort-card" data-cohort="global">
          <div class="cohort-card-header">
            <span class="cohort-icon cohort-icon-accent">GLO</span>
            <span class="cohort-badge-label">Virtual</span>
          </div>
          <h2>Global</h2>
          <p class="cohort-description">Virtual WAVE program for global students</p>
          <div class="cohort-stats">
            <div class="cohort-stat">
              <span class="stat-number">16.0 CU</span>
              <span class="stat-label">Available</span>
            </div>
            <div class="cohort-stat">
              <span class="stat-number">19.0 CU</span>
              <span class="stat-label">Required</span>
            </div>
          </div>
          <div class="cohort-card-footer">
            <span class="select-text">Select Global</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"/>
              <polyline points="12 5 19 12 12 19"/>
            </svg>
          </div>
        </button>
      </div>
    </section>
  </div>

  <!-- Finance Choice Modal (shown during PHL/SF cohort selection) -->
  <div id="finance-choice-modal" class="modal hidden">
    <div class="modal-backdrop" onclick="closeFinanceModal()"></div>
    <div class="modal-content finance-modal-content">
      <div class="finance-modal-header">
        <h2>Choose Your Corporate Finance Course</h2>
        <p>This decision affects your Term 3 schedule and major options</p>
      </div>
      <div class="finance-modal-options">
        <button class="finance-option-card" onclick="selectFinanceAndProceed('FNCE-6110')">
          <div class="finance-option-header">
            <span class="finance-option-badge recommended">Recommended</span>
            <span class="finance-option-cu">1.0 CU</span>
          </div>
          <h3>FNCE 6110</h3>
          <p class="finance-option-title">Corporate Finance (Full)</p>
          <ul class="finance-option-benefits">
            <li>Required for Finance major</li>
            <li>Unlocks advanced finance electives</li>
            <li>Comprehensive foundation</li>
          </ul>
        </button>
        <button class="finance-option-card" onclick="selectFinanceAndProceed('FNCE-6210')">
          <div class="finance-option-header">
            <span class="finance-option-badge">Alternative</span>
            <span class="finance-option-cu">0.5 CU</span>
          </div>
          <h3>FNCE 6210</h3>
          <p class="finance-option-title">Corporate Finance (Short)</p>
          <ul class="finance-option-benefits">
            <li>Shorter commitment</li>
            <li>More elective flexibility</li>
            <li>Cannot pursue Finance major</li>
          </ul>
        </button>
      </div>
      <p class="finance-modal-note">You can change this decision later from the Dashboard.</p>
    </div>
  </div>

  <!-- Main Application -->
  <div id="main-app" class="screen">
    <!-- Sidebar -->
    <aside class="app-sidebar">
      <div class="sidebar-header">
        <a href="#/" class="sidebar-logo" role="button" aria-label="Return to cohort selection" title="Back to cohort selection">
          <span class="logo-mark">W</span>
          <span class="logo-text">WEMBA</span>
        </a>
      </div>

      <div class="sidebar-cohort">
        <button id="cohort-switcher" class="cohort-selector">
          <span class="cohort-icon-small" id="cohort-icon-display">PHL</span>
          <span id="current-cohort-name">Philadelphia</span>
          <svg class="cohort-chevron" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
            <path d="M3 5l3 3 3-3H3z"/>
          </svg>
        </button>
      </div>

      <nav class="sidebar-nav">
        <span class="nav-section-label">Navigation</span>
        <button class="nav-tab active" data-view="dashboard">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7" rx="1"/>
            <rect x="14" y="3" width="7" height="7" rx="1"/>
            <rect x="3" y="14" width="7" height="7" rx="1"/>
            <rect x="14" y="14" width="7" height="7" rx="1"/>
          </svg>
          Dashboard
        </button>
        <button class="nav-tab" data-view="explorer">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
          </svg>
          Explorer
        </button>
        <button class="nav-tab" data-view="pathway">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
          </svg>
          My Pathway
        </button>
        <button class="nav-tab" data-view="graph">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="6" cy="6" r="3"/>
            <circle cx="6" cy="18" r="3"/>
            <path d="M6 9v6"/>
            <circle cx="18" cy="12" r="3"/>
            <path d="M8.5 7.5L15.5 11"/>
            <path d="M8.5 16.5L15.5 13"/>
          </svg>
          Graph Builder
        </button>
      </nav>

      <div class="sidebar-progress">
        <span class="nav-section-label">Progress</span>
        <div class="progress-mini">
          <div class="progress-mini-header">
            <span>Graduation</span>
            <span id="sidebar-progress-percent">50%</span>
          </div>
          <div class="progress-mini-bar">
            <div class="progress-mini-fill" id="sidebar-progress-fill" style="width: 50%"></div>
          </div>
          <div class="progress-mini-detail">
            <span id="sidebar-cu-display">9.5</span> / 19.0 CU
          </div>
        </div>
        <div class="sidebar-major-status" id="sidebar-major-status">
          <span class="major-label">Major</span>
          <span class="major-value">Not Selected</span>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <div class="app-main-content">

    <!-- Dashboard View -->
    <main id="dashboard-view" class="view active">
      <header class="content-header">
        <div class="content-header-left">
          <h1>Dashboard</h1>
          <p class="content-subtitle">Track your academic progress and plan your courses</p>
        </div>
        <div class="content-header-right">
          <div class="cu-display">
            <span id="total-cu" class="cu-value">9.5</span>
            <span class="cu-label">/ 19.0 CU</span>
          </div>
          <div class="header-search">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35"/>
            </svg>
            <input type="text" placeholder="Search courses..." class="header-search-input">
          </div>
          <button class="header-action-btn" onclick="clearElectives()" title="Clear all planned electives">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
              <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
            </svg>
          </button>
        </div>
      </header>
      <div class="view-content">
      <div class="dashboard-grid">
        <!-- Progress Card - Redesigned -->
        <div class="card progress-card-v2">
          <h3>Graduation Progress</h3>
          <div class="progress-card-content">
            <div class="progress-ring-container">
              <svg class="progress-ring" viewBox="0 0 120 120">
                <circle class="progress-ring-bg" cx="60" cy="60" r="52" />
                <circle class="progress-ring-fill" id="progress-ring-fill" cx="60" cy="60" r="52"
                        stroke-dasharray="326.73" stroke-dashoffset="163.36" />
              </svg>
              <div class="progress-ring-text">
                <span class="progress-ring-value" id="progress-cu">9.5</span>
                <span class="progress-ring-label">of 19.0 CU</span>
              </div>
            </div>
            <div class="progress-details">
              <div class="progress-detail-row">
                <span class="detail-label">Core Curriculum</span>
                <span class="detail-value" id="progress-core-cu">9.0 CU</span>
              </div>
              <div class="progress-detail-row">
                <span class="detail-label">Block Courses</span>
                <span class="detail-value" id="progress-block-cu">0 CU</span>
              </div>
              <div class="progress-detail-row">
                <span class="detail-label">Electives</span>
                <span class="detail-value" id="progress-elective-cu">0.5 CU</span>
              </div>
              <div class="progress-divider"></div>
              <div class="progress-detail-row progress-remaining">
                <span class="detail-label" id="graduation-status-label">Remaining</span>
                <span class="detail-value" id="graduation-status-value">9.5 CU</span>
              </div>
            </div>
          </div>
          <!-- Hidden elements for backward compatibility -->
          <div id="progress-bar" class="hidden" style="width: 50%"></div>
          <span id="progress-percent" class="hidden">(50%)</span>
          <div id="graduation-status" class="hidden status-badge pending">Need 9.5 more CU</div>
        </div>

        <!-- Major Progress Card - Redesigned -->
        <div class="card major-card-v2">
          <h3>Major Progress</h3>
          <div id="major-progress-content">
            <div class="major-empty-state">
              <div class="major-empty-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M12 14l9-5-9-5-9 5 9 5z"/>
                  <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
                  <path d="M12 14l9-5-9-5-9 5 9 5z"/>
                  <path d="M12 14v7"/>
                </svg>
              </div>
              <p class="major-empty-title">No major selected</p>
              <p class="major-empty-desc">Track your progress toward completing a concentration</p>
              <button class="btn-explore-majors" onclick="switchView('explorer')">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="M21 21l-4.35-4.35"/>
                </svg>
                Explore Majors
              </button>
            </div>
          </div>
        </div>

        <!-- Completed Block Courses Card -->
        <div class="card block-courses-card">
          <h3>Completed Block Courses</h3>
          <p class="card-subtitle">Select courses you've taken during Terms 1-3</p>
          <div id="completed-block-courses-content">
            <!-- Populated by JS -->
          </div>
        </div>

        <!-- Finance Decision Card (for PHL/SF only) -->
        <div id="finance-decision-card" class="card alert-card">
          <h3>Term 3 Decision Required</h3>
          <p>Choose your Corporate Finance option:</p>
          <div class="decision-options">
            <button class="decision-btn" data-choice="FNCE-6110">
              <strong>FNCE 6110</strong> (1.0 CU)
              <span>Required for Finance major</span>
            </button>
            <button class="decision-btn" data-choice="FNCE-6210">
              <strong>FNCE 6210</strong> (0.5 CU)
              <span>Shorter option, cannot pursue Finance major</span>
            </button>
          </div>
        </div>

        <!-- Alerts Section -->
        <div class="card alerts-card">
          <h3>Alerts & Recommendations</h3>
          <ul id="alerts-list" class="alerts-list">
            <li class="alert-item info">Select a major to see personalized recommendations</li>
          </ul>
        </div>

        <!-- Quick Actions -->
        <div class="card actions-card">
          <h3>Quick Actions</h3>
          <div class="action-buttons">
            <button class="btn-primary" onclick="switchView('explorer')">Explore Courses</button>
            <button class="btn-secondary" onclick="switchView('pathway')">View My Plan</button>
            <button class="btn-secondary" onclick="exportPlan()">Export Plan</button>
          </div>
        </div>
      </div>
      </div>
    </main>

    <!-- Explorer View -->
    <main id="explorer-view" class="view">
      <header class="content-header">
        <div class="content-header-left">
          <h1>Course Explorer</h1>
          <p class="content-subtitle">Browse and discover courses across all departments</p>
        </div>
        <div class="content-header-right">
          <div class="header-search">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35"/>
            </svg>
            <input type="text" id="course-search-header" placeholder="Search by name, code, or keyword..." class="header-search-input">
          </div>
        </div>
      </header>
      <div class="view-content">
      <div class="explorer-layout">
        <!-- Explorer Filters Sidebar -->
        <aside class="explorer-filters">
          <div class="browse-toggle">
            <button class="toggle-btn active" data-browse="majors">Majors</button>
            <button class="toggle-btn" data-browse="departments">Departments</button>
          </div>

          <div class="search-box">
            <input type="text" id="course-search" placeholder="Search courses...">
          </div>

          <!-- Majors List -->
          <ul id="majors-list" class="sidebar-list">
            <!-- Populated by JS -->
          </ul>

          <!-- Departments List -->
          <ul id="departments-list" class="sidebar-list hidden">
            <!-- Populated by JS -->
          </ul>
        </aside>

        <!-- Main Content -->
        <div class="explorer-content">
          <div id="explorer-header" class="explorer-header">
            <h2 id="explorer-title">Select a Major or Department</h2>
            <p id="explorer-subtitle">Browse courses and add them to your plan</p>
          </div>

          <div id="explorer-courses" class="course-grid">
            <p class="empty-state">Select a major or department from the sidebar to view available courses.</p>
          </div>
        </div>
      </div>
      </div>
    </main>

    <!-- Pathway View -->
    <main id="pathway-view" class="view">
      <header class="content-header">
        <div class="content-header-left">
          <h1>My Pathway</h1>
          <p class="content-subtitle">Plan your courses across terms to graduation</p>
        </div>
        <div class="content-header-right">
          <div class="pathway-header-stats">
            <div class="header-stat">
              <span class="header-stat-value" id="pathway-total-cu">9.5</span>
              <span class="header-stat-label">/ 19.0 CU</span>
            </div>
            <span class="header-stat-divider"></span>
            <span class="header-stat-status" id="pathway-status">In Progress</span>
          </div>
          <button class="btn-secondary btn-sm" onclick="clearElectives()">Clear Plan</button>
          <button class="btn-primary btn-sm" onclick="exportPlan()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            Export Plan
          </button>
        </div>
      </header>
      <div class="view-content">

      <div class="pathway-timeline">
        <!-- Year 1 -->
        <div class="year-section">
          <h3 class="year-label">Year 1 - Core Curriculum</h3>
          <div class="terms-row">
            <div class="term-card" id="term-T1">
              <div class="term-header">
                <h4>Term 1</h4>
                <span class="term-season">Summer</span>
                <span class="term-cu" id="T1-cu">3.5 CU</span>
              </div>
              <ul class="term-courses" id="T1-courses">
                <!-- Populated by JS -->
              </ul>
            </div>

            <div class="term-card" id="term-T2">
              <div class="term-header">
                <h4>Term 2</h4>
                <span class="term-season">Fall</span>
                <span class="term-cu" id="T2-cu">3.0 CU</span>
              </div>
              <ul class="term-courses" id="T2-courses">
                <!-- Populated by JS -->
              </ul>
            </div>

            <div class="term-card" id="term-T3">
              <div class="term-header">
                <h4>Term 3</h4>
                <span class="term-season">Spring</span>
                <span class="term-cu" id="T3-cu">2.5 CU</span>
              </div>
              <ul class="term-courses" id="T3-courses">
                <!-- Populated by JS -->
              </ul>
            </div>
          </div>
        </div>

        <!-- Year 2 -->
        <div class="year-section">
          <h3 class="year-label">Year 2 - Electives</h3>
          <div class="terms-row">
            <div class="term-card" id="term-T4">
              <div class="term-header">
                <h4>Term 4</h4>
                <span class="term-season">Summer 2026</span>
                <span class="term-cu" id="T4-cu">0 CU</span>
              </div>
              <ul class="term-courses" id="T4-courses">
                <li class="empty-slot">No courses planned</li>
              </ul>
              <button class="add-course-btn" onclick="addCourseToTerm('T4')">+ Add Course</button>
            </div>

            <div class="term-card" id="term-T5">
              <div class="term-header">
                <h4>Term 5</h4>
                <span class="term-season">Fall 2026</span>
                <span class="term-cu" id="T5-cu">0 CU</span>
              </div>
              <ul class="term-courses" id="T5-courses">
                <li class="empty-slot">No courses planned</li>
              </ul>
              <button class="add-course-btn" onclick="addCourseToTerm('T5')">+ Add Course</button>
            </div>

            <div class="term-card" id="term-T6">
              <div class="term-header">
                <h4>Term 6</h4>
                <span class="term-season">Spring 2027</span>
                <span class="term-cu" id="T6-cu">0 CU</span>
              </div>
              <ul class="term-courses" id="T6-courses">
                <li class="empty-slot">No courses planned</li>
              </ul>
              <button class="add-course-btn" onclick="addCourseToTerm('T6')">+ Add Course</button>
            </div>
          </div>
        </div>

        <!-- Block Weeks -->
        <div class="year-section">
          <h3 class="year-label">Block Weeks (Optional)</h3>
          <div class="terms-row">
            <div class="term-card block-week-card" id="term-BW">
              <div class="term-header">
                <h4>Block Weeks</h4>
                <span class="term-season">Various Dates</span>
                <span class="term-cu" id="BW-cu">0 CU</span>
              </div>
              <ul class="term-courses" id="BW-courses">
                <li class="empty-slot">No block weeks planned</li>
              </ul>
              <button class="add-course-btn" onclick="addCourseToTerm('BW')">+ Add Block Week</button>
              <p class="block-week-note">Up to 1.0 CU covered by tuition</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Validation Messages -->
      <div id="validation-messages" class="validation-section">
        <!-- Populated by JS -->
      </div>
      </div>
    </main>

    <!-- Graph Builder View -->
    <main id="graph-view" class="view view-dark">
      <header class="content-header content-header-dark">
        <div class="content-header-left">
          <h1>Graph Builder</h1>
          <p class="content-subtitle">Visualize course dependencies and build your plan</p>
        </div>
        <div class="content-header-right">
          <div class="zoom-controls">
            <button class="zoom-btn" id="zoom-out-btn-header" title="Zoom Out">âˆ’</button>
            <span class="zoom-level-display" id="zoom-level-header">100%</span>
            <button class="zoom-btn" id="zoom-in-btn-header" title="Zoom In">+</button>
          </div>
          <button class="btn-ghost" id="reset-view-btn" title="Reset View">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="1 4 1 10 7 10"/>
              <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
            </svg>
            Reset View
          </button>
        </div>
      </header>
      <div class="view-content view-content-dark">
      <div class="graph-layout">
        <!-- Course Catalog Panel -->
        <aside class="graph-catalog">
          <div class="catalog-header">
            <h3>Course Catalog</h3>
            <p class="catalog-subtitle">Drag courses to your plan</p>
          </div>
          <div id="catalog-majors" class="catalog-sections">
            <!-- Populated by JS: collapsible major sections -->
          </div>
          <div class="catalog-empty-state" id="catalog-empty">
            <p>Select target majors in Explorer to see relevant courses here</p>
          </div>
        </aside>

        <!-- Graph Canvas Panel -->
        <div class="graph-panel">
          <!-- Core Curriculum Summary Bar -->
          <div class="core-summary" id="core-summary">
            <div class="core-summary-collapsed" id="core-collapsed">
              <span class="core-label">Core Curriculum: <strong id="core-cu-total">9.0 CU</strong></span>
              <span class="core-cohort" id="core-cohort-name">Philadelphia</span>
              <span class="finance-indicator" id="finance-indicator"></span>
              <button class="core-expand-btn" id="core-expand-btn">Expand</button>
            </div>
            <div class="core-summary-expanded hidden" id="core-expanded">
              <div class="core-terms">
                <div class="core-term" id="core-T1"></div>
                <div class="core-term" id="core-T2"></div>
                <div class="core-term" id="core-T3"></div>
              </div>
              <button class="core-collapse-btn" id="core-collapse-btn">Collapse</button>
            </div>
          </div>

          <!-- SVG Graph Canvas -->
          <div class="graph-canvas-container" id="graph-canvas-container">
            <div class="graph-alerts hidden" id="graph-alerts">
              <h4>Alerts</h4>
              <ul class="alerts-list" id="graph-alerts-list"></ul>
            </div>
            <svg id="pathway-graph" class="pathway-graph">
              <defs>
                <!-- Default arrow (gray, inactive) -->
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8" />
                </marker>
                <!-- Prerequisite arrow (blue, filled) -->
                <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6" />
                </marker>
                <!-- Unlock arrow (green, hollow/open) -->
                <marker id="arrowhead-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto">
                  <polygon points="0 0, 12 4, 0 8" fill="none" stroke="#22c55e" stroke-width="1.5"/>
                </marker>
                <!-- Unlock arrow (green, filled - for more visibility) -->
                <marker id="arrowhead-green-filled" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e" />
                </marker>
                <!-- Conflict indicator (red circle) -->
                <marker id="conflict-indicator" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                  <circle cx="5" cy="5" r="4" fill="#dc2626" stroke="white" stroke-width="1"/>
                </marker>
                <!-- Small arrow for core prerequisites (dashed connections) -->
                <marker id="arrowhead-blue-small" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                  <polygon points="0 0, 8 3, 0 6" fill="#3b82f6" />
                </marker>
              </defs>
              <!-- Connection lines layer -->
              <g id="connections-layer"></g>
              <!-- Nodes layer -->
              <g id="nodes-layer"></g>
              <!-- Drop zone indicators -->
              <g id="dropzones-layer"></g>
            </svg>
          </div>

          <!-- Graph Controls -->
          <div class="graph-controls">
            <button class="graph-control-btn" id="zoom-in-btn" title="Zoom In">+</button>
            <button class="graph-control-btn" id="zoom-out-btn" title="Zoom Out">âˆ’</button>
            <button class="graph-control-btn" id="zoom-reset-btn" title="Reset View">âŸ²</button>
            <span class="zoom-level" id="zoom-level">100%</span>
          </div>

          <!-- Graph Legend -->
          <div class="graph-legend-box" id="graph-legend">
            <h4>Legend</h4>
            <div class="legend-row">
              <div class="legend-section">
                <h5>Departments</h5>
                <div class="legend-items legend-depts">
                  <span class="legend-dept" style="--dept-color: #2563eb">FNCE</span>
                  <span class="legend-dept" style="--dept-color: #7c3aed">MGMT</span>
                  <span class="legend-dept" style="--dept-color: #db2777">MKTG</span>
                  <span class="legend-dept" style="--dept-color: #059669">OIDD</span>
                  <span class="legend-dept" style="--dept-color: #d97706">ACCT</span>
                  <span class="legend-dept" style="--dept-color: #0891b2">STAT</span>
                </div>
              </div>
              <div class="legend-section">
                <h5>Connections</h5>
                <div class="legend-items">
                  <div class="legend-item legend-interactive" data-highlight="prereq" title="Click to highlight all prerequisites">
                    <span class="legend-line legend-line-blue"></span>
                    <span>Prerequisites <span class="legend-count" id="prereq-count">(0)</span></span>
                  </div>
                  <div class="legend-item legend-interactive" data-highlight="unlock" title="Click to highlight all unlocks">
                    <span class="legend-line legend-line-green"></span>
                    <span>Unlocks <span class="legend-count" id="unlock-count">(0)</span></span>
                  </div>
                </div>
              </div>
              <div class="legend-section">
                <h5>Warnings</h5>
                <div class="legend-items">
                  <div class="legend-item legend-interactive" data-highlight="warning-prereq" title="Click to highlight courses with missing prerequisites">
                    <span class="legend-icon warning-prereq">âš </span>
                    <span>Missing prereq <span class="legend-count" id="warning-prereq-count">(0)</span></span>
                  </div>
                  <div class="legend-item legend-interactive" data-highlight="warning-conflict" title="Click to highlight courses with conflicts">
                    <span class="legend-icon warning-conflict">âš¡</span>
                    <span>Schedule conflict <span class="legend-count" id="warning-conflict-count">(0)</span></span>
                  </div>
                </div>
              </div>
              <div class="legend-section">
                <h5>Status</h5>
                <div class="legend-items">
                  <div class="legend-item">
                    <span class="legend-icon status-added">âœ“</span>
                    <span>In plan</span>
                  </div>
                  <div class="legend-item">
                    <span class="legend-icon status-locked">ðŸ”’</span>
                    <span>Locked</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Graph Header Stats -->
          <div class="graph-header-stats">
            <div class="graph-stat">
              <span class="graph-stat-value" id="graph-total-cu">9.0</span>
              <span class="graph-stat-label">/ 19.0 CU</span>
            </div>
            <div class="graph-major-progress" id="graph-major-progress">
              <!-- Mini progress bars for target majors -->
            </div>
            <button class="graph-toggle-btn" id="show-conflicts-btn" title="Show Schedule Conflicts">
              <span class="toggle-icon">âš¡</span>
              <span class="toggle-label">Conflicts</span>
              <span class="conflict-count-badge hidden" id="conflict-count-badge">0</span>
            </button>
            <div class="graph-majors-display" id="graph-majors-display">
              <span class="majors-label">Majors:</span>
              <div class="selected-majors-tags" id="selected-majors-tags">
                <!-- Populated by JS -->
              </div>
              <button class="clear-majors-btn" id="clear-majors-btn" title="Clear all target majors">Ã—</button>
            </div>
            <div class="graph-mode-selector" id="major-mode-selector">
              <button class="mode-btn active" data-mode="all" title="Show All Courses">All</button>
              <button class="mode-btn" data-mode="highlight" title="Highlight Major Courses">Highlight</button>
              <button class="mode-btn" data-mode="filter" title="Filter to Major Courses">Filter</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Trash Drop Zone (appears when dragging) -->
      <div class="trash-dropzone hidden" id="trash-dropzone">
        <span>Drop to remove</span>
      </div>

      <!-- Course Info Panel (appears on node selection) -->
      <div class="course-info-panel hidden" id="course-info-panel">
        <div class="info-panel-header">
          <h4 id="info-panel-title">Course Info</h4>
          <button class="info-panel-close" id="info-panel-close">&times;</button>
        </div>
        <div class="info-panel-content">
          <div class="info-section" id="info-prereqs-section">
            <h5>Prerequisites</h5>
            <ul id="info-prereqs-list"></ul>
          </div>
          <div class="info-section" id="info-unlocks-section">
            <h5>Unlocks</h5>
            <ul id="info-unlocks-list"></ul>
          </div>
          <div class="info-section" id="info-conflicts-section">
            <h5>Conflicts</h5>
            <ul id="info-conflicts-list"></ul>
          </div>
        </div>
      </div>
      </div>
    </main>
    </div><!-- End .app-main-content -->
  </div>

  <!-- Course Detail Modal -->
  <div id="course-modal" class="modal hidden">
    <div class="modal-backdrop" onclick="closeModal()"></div>
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()">&times;</button>
      <div id="modal-body">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>

  <!-- Add Course Modal -->
  <div id="add-course-modal" class="modal hidden">
    <div class="modal-backdrop" onclick="closeAddCourseModal()"></div>
    <div class="modal-content modal-large">
      <button class="modal-close" onclick="closeAddCourseModal()">&times;</button>
      <h2 id="add-course-title">Add Course to Term 4</h2>
      <div id="add-course-list" class="add-course-grid">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>

  <!-- Custom Course Modal -->
  <div id="custom-course-modal" class="modal hidden">
    <div class="modal-backdrop" onclick="closeCustomCourseModal()"></div>
    <div class="modal-content modal-medium">
      <button class="modal-close" onclick="closeCustomCourseModal()">&times;</button>
      <h2>Create Custom Course</h2>
      <p class="modal-subtitle">Add an independent study or course not in the catalog</p>

      <form id="custom-course-form" onsubmit="submitCustomCourse(event)">
        <div class="form-row">
          <div class="form-group">
            <label for="custom-code">Course Code *</label>
            <input type="text" id="custom-code" placeholder="e.g., MGMT 9999" required
                   pattern="[A-Z]{2,4}\s?\d{4}" title="Format: DEPT 1234 (e.g., MGMT 9999)">
          </div>
          <div class="form-group">
            <label for="custom-credits">Credits *</label>
            <select id="custom-credits" required>
              <option value="0.5">0.5 CU</option>
              <option value="1.0" selected>1.0 CU</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="custom-title">Course Title *</label>
          <input type="text" id="custom-title" placeholder="e.g., Independent Study in Leadership" required>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="custom-department">Department *</label>
            <select id="custom-department" required>
              <option value="">Select department...</option>
              <option value="FNCE">Finance (FNCE)</option>
              <option value="MGMT">Management (MGMT)</option>
              <option value="MKTG">Marketing (MKTG)</option>
              <option value="OIDD">Operations, Info & Decisions (OIDD)</option>
              <option value="ACCT">Accounting (ACCT)</option>
              <option value="STAT">Statistics (STAT)</option>
              <option value="LGST">Legal Studies (LGST)</option>
              <option value="HCMG">Health Care Management (HCMG)</option>
              <option value="REAL">Real Estate (REAL)</option>
              <option value="BEPP">Business Econ & Public Policy (BEPP)</option>
              <option value="WHCP">Wharton Communication (WHCP)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="custom-type">Course Type *</label>
            <select id="custom-type" required onchange="updateCustomCourseForm()">
              <option value="regular">Regular Term Course</option>
              <option value="block">Block Week (BW)</option>
              <option value="gmc">Global Modular Course (GMC)</option>
              <option value="gbw">Global Block Week (GBW)</option>
            </select>
          </div>
        </div>

        <!-- Regular term fields -->
        <div id="regular-term-fields" class="form-row">
          <div class="form-group">
            <label for="custom-term">Term *</label>
            <select id="custom-term">
              <option value="T4">Term 4</option>
              <option value="T5">Term 5</option>
              <option value="T6">Term 6</option>
            </select>
          </div>
          <div class="form-group">
            <label for="custom-slot">Slot *</label>
            <select id="custom-slot">
              <option value="A">Slot A (Weekends 1-4)</option>
              <option value="B">Slot B (Weekends 1-4)</option>
              <option value="C">Slot C (Weekends 5-7)</option>
            </select>
          </div>
        </div>

        <!-- Block week fields (hidden by default) -->
        <div id="block-week-fields" class="form-row hidden">
          <div class="form-group">
            <label for="custom-dates">Dates *</label>
            <input type="text" id="custom-dates" placeholder="e.g., Jan 5-9, 2027">
          </div>
          <div class="form-group">
            <label for="custom-location">Location</label>
            <input type="text" id="custom-location" placeholder="e.g., Philadelphia, UAE">
          </div>
        </div>

        <!-- Block week term selector (for BW/GMC/GBW) -->
        <div id="block-term-field" class="form-group hidden">
          <label for="custom-block-term">Associated Term</label>
          <select id="custom-block-term">
            <option value="T4">Term 4</option>
            <option value="T5">Term 5</option>
            <option value="T6">Term 6</option>
          </select>
        </div>

        <!-- Major relevance -->
        <div class="form-group">
          <label>Counts Toward Major(s)</label>
          <p class="form-hint">Select if this course counts toward any of your target majors</p>
          <div id="custom-majors-checkboxes" class="checkbox-grid">
            <!-- Populated by JS based on available majors -->
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-secondary" onclick="closeCustomCourseModal()">Cancel</button>
          <button type="submit" class="btn-primary">Create Course</button>
        </div>
      </form>
    </div>
  </div>

  <script src="data.js"></script>
  <script src="router.js"></script>
  <script src="pathway-graph.js"></script>
  <script src="app.js"></script>
</body>
</html>
