<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WEMBA 51 Pathway Planner</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Cohort Selection Screen -->
  <div id="cohort-selection" class="screen active">
    <div class="cohort-container">
      <div class="landing-header">
        <div class="penn-shield"></div>
        <h1>WEMBA 51 Pathway Planner</h1>
        <p class="subtitle">Plan your path to graduation</p>
      </div>

      <div class="landing-instructions">
        <p class="instruction-text">Select your cohort below to begin planning your academic journey. You'll be able to:</p>
        <ul class="instruction-list">
          <li>Explore majors and browse available elective courses</li>
          <li>Build a personalized pathway to meet the 19.0 CU graduation requirement</li>
          <li>Track your progress toward completing a major concentration</li>
          <li>Visualize your plan with the interactive Graph Builder</li>
        </ul>
      </div>

      <div class="cohort-cards">
        <button class="cohort-card" data-cohort="philadelphia">
          <div class="cohort-icon">PHL</div>
          <h2>Philadelphia</h2>
          <p>East Coast | In-Person</p>
          <span class="cohort-detail">22.0 CU available</span>
        </button>

        <button class="cohort-card" data-cohort="san_francisco">
          <div class="cohort-icon">SF</div>
          <h2>San Francisco</h2>
          <p>West Coast | In-Person</p>
          <span class="cohort-detail">19.5 CU available</span>
        </button>

        <button class="cohort-card" data-cohort="global">
          <div class="cohort-icon">GLO</div>
          <h2>Global</h2>
          <p>Virtual | WAVE</p>
          <span class="cohort-detail">16.0 CU available</span>
        </button>
      </div>

      <p class="note">Minimum 19.0 CU required for graduation</p>
      <p class="disclaimer">This tool is for planning purposes only. Consult your academic advisor for official guidance.</p>
    </div>
  </div>

  <!-- Main Application -->
  <div id="main-app" class="screen">
    <!-- Desktop Sidebar (hidden on mobile) -->
    <aside class="desktop-sidebar" id="desktop-sidebar">
      <div class="sidebar-brand">
        <div class="sidebar-logo">W</div>
        <span class="sidebar-title">WEMBA 51</span>
      </div>

      <nav class="sidebar-nav">
        <button class="sidebar-nav-item active" data-view="explore">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
          <span>Explore</span>
        </button>
        <button class="sidebar-nav-item" data-view="build">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
            <path d="M2 17l10 5 10-5"/>
            <path d="M2 12l10 5 10-5"/>
          </svg>
          <span>Build</span>
        </button>
      </nav>

      <div class="sidebar-progress">
        <div class="sidebar-progress-header">
          <span class="sidebar-progress-label">Progress</span>
          <span class="sidebar-progress-value" id="sidebar-progress-cu">9.5/19</span>
        </div>
        <div class="sidebar-progress-bar">
          <div class="sidebar-progress-fill" id="sidebar-progress-fill" style="width: 50%"></div>
        </div>

        <div class="sidebar-majors" id="sidebar-majors">
          <!-- Populated by JS -->
        </div>

        <div class="sidebar-alerts" id="sidebar-alerts">
          <span class="sidebar-alert-badge" id="sidebar-alert-count">0</span>
          <span>alerts</span>
        </div>
      </div>

      <div class="sidebar-footer">
        <button class="sidebar-cohort-btn" id="sidebar-cohort-btn">
          <span id="sidebar-cohort-name">PHL</span>
          <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
            <path d="M3 5l3 3 3-3H3z"/>
          </svg>
        </button>
      </div>
    </aside>

    <!-- Main Content Area -->
    <div class="main-content-area">
      <!-- Compact Header (Mobile shows CU, Desktop hidden) -->
      <header class="app-header-compact" id="app-header-compact">
        <button class="header-cu-trigger" id="header-cu-trigger">
          <span id="header-total-cu">9.5</span>
          <span class="header-cu-max">/19 CU</span>
          <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
            <path d="M6 8L2 4h8L6 8z"/>
          </svg>
        </button>
        <span class="header-cohort-badge" id="header-cohort-badge">PHL</span>
        <button class="header-filter-btn" id="header-filter-btn" title="Filter by major">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>
          </svg>
        </button>
      </header>

      <!-- Legacy Header (hidden, kept for compatibility) -->
      <header class="app-header legacy-header" style="display: none;">
        <div class="header-left">
          <h1>WEMBA 51 Pathway Planner</h1>
          <button id="cohort-switcher" class="cohort-badge">
            <span id="current-cohort-name">Philadelphia</span>
            <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
              <path d="M3 5l3 3 3-3H3z"/>
            </svg>
          </button>
        </div>
        <div class="header-right">
          <div class="cu-summary">
            <span class="cu-label">Plan Total:</span>
            <span id="total-cu" class="cu-value">9.5</span>
            <span class="cu-label">/ 19.0 CU</span>
          </div>
          <button class="clear-plan-btn" onclick="clearElectives()" title="Clear all planned electives">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
              <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
            </svg>
            Clear Plan
          </button>
        </div>
      </header>

      <!-- Legacy Navigation (hidden) -->
      <nav class="main-nav legacy-nav" style="display: none;">
        <button class="nav-tab active" data-view="dashboard">Dashboard</button>
        <button class="nav-tab" data-view="explorer">Explorer</button>
        <button class="nav-tab" data-view="pathway">My Pathway</button>
        <button class="nav-tab" data-view="graph">Graph Builder</button>
      </nav>

    <!-- Dashboard View -->
    <main id="dashboard-view" class="view active">
      <div class="dashboard-grid">
        <!-- Progress Card -->
        <div class="card progress-card">
          <h3>Graduation Progress</h3>
          <div class="progress-bar-container">
            <div id="progress-bar" class="progress-bar" style="width: 50%"></div>
          </div>
          <div class="progress-stats">
            <span id="progress-cu">9.5</span> / 19.0 CU
            <span id="progress-percent" class="progress-percent">(50%)</span>
          </div>
          <div id="graduation-status" class="status-badge pending">Need 9.5 more CU</div>
        </div>

        <!-- Major Progress Card -->
        <div class="card major-card">
          <h3>Major Progress</h3>
          <div id="major-progress-content">
            <p class="empty-state">No major selected</p>
            <button class="btn-secondary" onclick="switchView('explorer')">Explore Majors</button>
          </div>
        </div>

        <!-- Completed Block Courses Card -->
        <div class="card block-courses-card">
          <h3>Completed Block Courses</h3>
          <p class="card-subtitle">Select courses you've taken during Terms 1-3</p>
          <div id="completed-block-courses-content">
            <!-- Populated by JS -->
          </div>
        </div>

        <!-- Finance Decision Card (for PHL/SF only) -->
        <div id="finance-decision-card" class="card alert-card">
          <h3>Term 3 Decision Required</h3>
          <p>Choose your Corporate Finance option:</p>
          <div class="decision-options">
            <button class="decision-btn" data-choice="FNCE-6110">
              <strong>FNCE 6110</strong> (1.0 CU)
              <span>Required for Finance major</span>
            </button>
            <button class="decision-btn" data-choice="FNCE-6210">
              <strong>FNCE 6210</strong> (0.5 CU)
              <span>Shorter option, cannot pursue Finance major</span>
            </button>
          </div>
        </div>

        <!-- Alerts Section -->
        <div class="card alerts-card">
          <h3>Alerts & Recommendations</h3>
          <ul id="alerts-list" class="alerts-list">
            <li class="alert-item info">Select a major to see personalized recommendations</li>
          </ul>
        </div>

        <!-- Quick Actions -->
        <div class="card actions-card">
          <h3>Quick Actions</h3>
          <div class="action-buttons">
            <button class="btn-primary" onclick="switchView('explorer')">Explore Courses</button>
            <button class="btn-secondary" onclick="switchView('pathway')">View My Plan</button>
            <button class="btn-secondary" onclick="exportPlan()">Export Plan</button>
          </div>
        </div>
      </div>
    </main>

    <!-- Explorer View -->
    <main id="explorer-view" class="view">
      <div class="explorer-layout">
        <!-- Sidebar -->
        <aside class="explorer-sidebar">
          <div class="browse-toggle">
            <button class="toggle-btn active" data-browse="majors">Majors</button>
            <button class="toggle-btn" data-browse="departments">Departments</button>
          </div>

          <div class="search-box">
            <input type="text" id="course-search" placeholder="Search courses...">
          </div>

          <!-- Majors List -->
          <ul id="majors-list" class="sidebar-list">
            <!-- Populated by JS -->
          </ul>

          <!-- Departments List -->
          <ul id="departments-list" class="sidebar-list hidden">
            <!-- Populated by JS -->
          </ul>
        </aside>

        <!-- Main Content -->
        <div class="explorer-content">
          <div id="explorer-header" class="explorer-header">
            <h2 id="explorer-title">Select a Major or Department</h2>
            <p id="explorer-subtitle">Browse courses and add them to your plan</p>
          </div>

          <div id="explorer-courses" class="course-grid">
            <p class="empty-state">Select a major or department from the sidebar to view available courses.</p>
          </div>
        </div>
      </div>
    </main>

    <!-- Pathway View -->
    <main id="pathway-view" class="view">
      <div class="pathway-header">
        <div class="pathway-summary">
          <h2>Your Graduation Pathway</h2>
          <div class="pathway-stats">
            <div class="stat">
              <span class="stat-value" id="pathway-total-cu">9.5</span>
              <span class="stat-label">Total CU</span>
            </div>
            <div class="stat">
              <span class="stat-value" id="pathway-status">In Progress</span>
              <span class="stat-label">Status</span>
            </div>
            <div class="stat">
              <span class="stat-value" id="pathway-majors">None</span>
              <span class="stat-label">Major(s)</span>
            </div>
          </div>
        </div>
        <div class="pathway-actions">
          <button class="btn-secondary" onclick="clearElectives()">Clear Electives</button>
          <button class="btn-primary" onclick="exportPlan()">Export Plan</button>
        </div>
      </div>

      <div class="pathway-timeline">
        <!-- Year 1 -->
        <div class="year-section">
          <h3 class="year-label">Year 1 - Core Curriculum</h3>
          <div class="terms-row">
            <div class="term-card" id="term-T1">
              <div class="term-header">
                <h4>Term 1</h4>
                <span class="term-season">Summer</span>
                <span class="term-cu" id="T1-cu">3.5 CU</span>
              </div>
              <ul class="term-courses" id="T1-courses">
                <!-- Populated by JS -->
              </ul>
            </div>

            <div class="term-card" id="term-T2">
              <div class="term-header">
                <h4>Term 2</h4>
                <span class="term-season">Fall</span>
                <span class="term-cu" id="T2-cu">3.0 CU</span>
              </div>
              <ul class="term-courses" id="T2-courses">
                <!-- Populated by JS -->
              </ul>
            </div>

            <div class="term-card" id="term-T3">
              <div class="term-header">
                <h4>Term 3</h4>
                <span class="term-season">Spring</span>
                <span class="term-cu" id="T3-cu">2.5 CU</span>
              </div>
              <ul class="term-courses" id="T3-courses">
                <!-- Populated by JS -->
              </ul>
            </div>
          </div>
        </div>

        <!-- Year 2 -->
        <div class="year-section">
          <h3 class="year-label">Year 2 - Electives</h3>
          <div class="terms-row">
            <div class="term-card" id="term-T4">
              <div class="term-header">
                <h4>Term 4</h4>
                <span class="term-season">Summer 2026</span>
                <span class="term-cu" id="T4-cu">0 CU</span>
              </div>
              <ul class="term-courses" id="T4-courses">
                <li class="empty-slot">No courses planned</li>
              </ul>
              <button class="add-course-btn" onclick="addCourseToTerm('T4')">+ Add Course</button>
            </div>

            <div class="term-card" id="term-T5">
              <div class="term-header">
                <h4>Term 5</h4>
                <span class="term-season">Fall 2026</span>
                <span class="term-cu" id="T5-cu">0 CU</span>
              </div>
              <ul class="term-courses" id="T5-courses">
                <li class="empty-slot">No courses planned</li>
              </ul>
              <button class="add-course-btn" onclick="addCourseToTerm('T5')">+ Add Course</button>
            </div>

            <div class="term-card" id="term-T6">
              <div class="term-header">
                <h4>Term 6</h4>
                <span class="term-season">Spring 2027</span>
                <span class="term-cu" id="T6-cu">0 CU</span>
              </div>
              <ul class="term-courses" id="T6-courses">
                <li class="empty-slot">No courses planned</li>
              </ul>
              <button class="add-course-btn" onclick="addCourseToTerm('T6')">+ Add Course</button>
            </div>
          </div>
        </div>

        <!-- Block Weeks -->
        <div class="year-section">
          <h3 class="year-label">Block Weeks (Optional)</h3>
          <div class="terms-row">
            <div class="term-card block-week-card" id="term-BW">
              <div class="term-header">
                <h4>Block Weeks</h4>
                <span class="term-season">Various Dates</span>
                <span class="term-cu" id="BW-cu">0 CU</span>
              </div>
              <ul class="term-courses" id="BW-courses">
                <li class="empty-slot">No block weeks planned</li>
              </ul>
              <button class="add-course-btn" onclick="addCourseToTerm('BW')">+ Add Block Week</button>
              <p class="block-week-note">Up to 1.0 CU covered by tuition</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Validation Messages -->
      <div id="validation-messages" class="validation-section">
        <!-- Populated by JS -->
      </div>
    </main>

    <!-- Graph Builder View -->
    <main id="graph-view" class="view">
      <div class="graph-layout">
        <!-- Course Catalog Panel -->
        <aside class="graph-catalog">
          <div class="catalog-header">
            <h3>Course Catalog</h3>
            <p class="catalog-subtitle">Drag courses to your plan</p>
          </div>
          <div id="catalog-majors" class="catalog-sections">
            <!-- Populated by JS: collapsible major sections -->
          </div>
          <div class="catalog-empty-state" id="catalog-empty">
            <p>Select target majors in Explorer to see relevant courses here</p>
          </div>
        </aside>

        <!-- Graph Canvas Panel -->
        <div class="graph-panel">
          <!-- Core Curriculum Summary Bar -->
          <div class="core-summary" id="core-summary">
            <div class="core-summary-collapsed" id="core-collapsed">
              <span class="core-label">Core Curriculum: <strong id="core-cu-total">9.0 CU</strong></span>
              <span class="core-cohort" id="core-cohort-name">Philadelphia</span>
              <span class="finance-indicator" id="finance-indicator"></span>
              <button class="core-expand-btn" id="core-expand-btn">Expand</button>

              <!-- Graph Header Stats (integrated into core summary bar) -->
              <div class="graph-header-stats">
                <div class="graph-stat">
                  <span class="graph-stat-value" id="graph-total-cu">9.0</span>
                  <span class="graph-stat-label">/ 19.0 CU</span>
                </div>
                <div class="graph-major-progress" id="graph-major-progress">
                  <!-- Mini progress bars for target majors -->
                </div>
                <button class="graph-toggle-btn" id="show-conflicts-btn" title="Show Schedule Conflicts">
                  <span class="toggle-icon">âš¡</span>
                  <span class="toggle-label">Conflicts</span>
                  <span class="conflict-count-badge hidden" id="conflict-count-badge">0</span>
                </button>
                <div class="graph-majors-display" id="graph-majors-display">
                  <span class="majors-label">Majors:</span>
                  <div class="selected-majors-tags" id="selected-majors-tags">
                    <!-- Populated by JS -->
                  </div>
                  <button class="clear-majors-btn" id="clear-majors-btn" title="Clear all target majors">Ã—</button>
                </div>
                <div class="graph-mode-selector" id="major-mode-selector">
                  <button class="mode-btn active" data-mode="all" title="Show All Courses">All</button>
                  <button class="mode-btn" data-mode="highlight" title="Highlight Major Courses">Highlight</button>
                  <button class="mode-btn" data-mode="filter" title="Filter to Major Courses">Filter</button>
                </div>
              </div>
            </div>
            <div class="core-summary-expanded hidden" id="core-expanded">
              <div class="core-terms">
                <div class="core-term" id="core-T1"></div>
                <div class="core-term" id="core-T2"></div>
                <div class="core-term" id="core-T3"></div>
              </div>
              <button class="core-collapse-btn" id="core-collapse-btn">Collapse</button>
            </div>
          </div>

          <!-- SVG Graph Canvas -->
          <div class="graph-canvas-container" id="graph-canvas-container">
            <button class="graph-conflict-chip hidden" id="graph-conflict-chip" type="button">
              Conflicts (0)
            </button>
            <div class="graph-alerts hidden" id="graph-alerts">
              <h4>Alerts</h4>
              <ul class="alerts-list" id="graph-alerts-list"></ul>
            </div>
            <svg id="pathway-graph" class="pathway-graph">
              <defs>
                <!-- Default arrow (gray, inactive) -->
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8" />
                </marker>
                <!-- Prerequisite arrow (blue, filled) -->
                <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6" />
                </marker>
                <!-- Unlock arrow (green, hollow/open) -->
                <marker id="arrowhead-green" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto">
                  <polygon points="0 0, 12 4, 0 8" fill="none" stroke="#22c55e" stroke-width="1.5"/>
                </marker>
                <!-- Unlock arrow (green, filled - for more visibility) -->
                <marker id="arrowhead-green-filled" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e" />
                </marker>
                <!-- Conflict indicator (red circle) -->
                <marker id="conflict-indicator" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                  <circle cx="5" cy="5" r="4" fill="#dc2626" stroke="white" stroke-width="1"/>
                </marker>
                <!-- Small arrow for core prerequisites (dashed connections) -->
                <marker id="arrowhead-blue-small" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                  <polygon points="0 0, 8 3, 0 6" fill="#3b82f6" />
                </marker>
              </defs>
              <!-- Connection lines layer -->
              <g id="connections-layer"></g>
              <!-- Nodes layer -->
              <g id="nodes-layer"></g>
              <!-- Drop zone indicators -->
              <g id="dropzones-layer"></g>
            </svg>
          </div>

          <!-- Graph Controls -->
          <div class="graph-controls">
            <button class="graph-control-btn" id="zoom-in-btn" title="Zoom In">+</button>
            <button class="graph-control-btn" id="zoom-out-btn" title="Zoom Out">âˆ’</button>
            <button class="graph-control-btn" id="zoom-reset-btn" title="Reset View">âŸ²</button>
            <span class="zoom-level" id="zoom-level">100%</span>
          </div>

          <!-- Graph Legend -->
          <div class="graph-legend-box" id="graph-legend">
            <div class="legend-header">
              <h4>Legend</h4>
              <button class="legend-toggle" id="legend-toggle-btn" type="button" aria-expanded="true" aria-controls="legend-content">Hide</button>
            </div>
            <div class="legend-content" id="legend-content">
              <div class="legend-row">
              <div class="legend-section">
                <h5>Departments</h5>
                <div class="legend-items legend-depts">
                  <span class="legend-dept" style="--dept-color: #2563eb">FNCE</span>
                  <span class="legend-dept" style="--dept-color: #7c3aed">MGMT</span>
                  <span class="legend-dept" style="--dept-color: #db2777">MKTG</span>
                  <span class="legend-dept" style="--dept-color: #059669">OIDD</span>
                  <span class="legend-dept" style="--dept-color: #d97706">ACCT</span>
                  <span class="legend-dept" style="--dept-color: #0891b2">STAT</span>
                </div>
              </div>
              <div class="legend-section">
                <h5>Connections</h5>
                <div class="legend-items">
                  <div class="legend-item legend-interactive" data-highlight="prereq" title="Click to highlight all prerequisites">
                    <span class="legend-line legend-line-blue"></span>
                    <span>Prerequisites <span class="legend-count" id="prereq-count">(0)</span></span>
                  </div>
                  <div class="legend-item legend-interactive" data-highlight="unlock" title="Click to highlight all unlocks">
                    <span class="legend-line legend-line-green"></span>
                    <span>Unlocks <span class="legend-count" id="unlock-count">(0)</span></span>
                  </div>
                </div>
              </div>
              <div class="legend-section">
                <h5>Warnings</h5>
                <div class="legend-items">
                  <div class="legend-item legend-interactive" data-highlight="warning-prereq" title="Click to highlight courses with missing prerequisites">
                    <span class="legend-icon warning-prereq">âš </span>
                    <span>Missing prereq <span class="legend-count" id="warning-prereq-count">(0)</span></span>
                  </div>
                  <div class="legend-item legend-interactive" data-highlight="warning-conflict" title="Click to highlight courses with conflicts">
                    <span class="legend-icon warning-conflict">âš¡</span>
                    <span>Schedule conflict <span class="legend-count" id="warning-conflict-count">(0)</span></span>
                  </div>
                </div>
              </div>
              <div class="legend-section">
                <h5>Status</h5>
                <div class="legend-items">
                  <div class="legend-item">
                    <span class="legend-icon status-added">âœ“</span>
                    <span>In plan</span>
                  </div>
                  <div class="legend-item">
                    <span class="legend-icon status-locked">ðŸ”’</span>
                    <span>Locked</span>
                  </div>
                </div>
              </div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- Trash Drop Zone (appears when dragging) -->
      <div class="trash-dropzone hidden" id="trash-dropzone">
        <span>Drop to remove</span>
      </div>

      <!-- Course Info Panel Backdrop (mobile only) -->
      <div class="info-panel-backdrop hidden" id="info-panel-backdrop"></div>

      <!-- Course Info Panel (appears on node selection) -->
      <div class="course-info-panel hidden" id="course-info-panel">
        <div class="info-panel-header">
          <h4 id="info-panel-title">Course Info</h4>
          <button class="info-panel-close" id="info-panel-close" aria-label="Close">&times;</button>
        </div>
        <div class="info-panel-content">
          <div class="info-section" id="info-prereqs-section">
            <h5>Prerequisites</h5>
            <ul id="info-prereqs-list"></ul>
          </div>
          <div class="info-section" id="info-unlocks-section">
            <h5>Unlocks</h5>
            <ul id="info-unlocks-list"></ul>
          </div>
          <div class="info-section" id="info-conflicts-section">
            <h5>Conflicts</h5>
            <ul id="info-conflicts-list"></ul>
          </div>
        </div>
      </div>

      <!-- Quick Add Button (mobile FAB) -->
      <button class="graph-quick-add" id="graph-quick-add" title="Add Course">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <line x1="12" y1="5" x2="12" y2="19"/>
          <line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
      </button>
    </main>

    </div><!-- End main-content-area -->

    <!-- Bottom Tab Bar (iOS style - mobile only) -->
    <nav class="bottom-tab-bar" id="bottom-tab-bar">
      <button class="bottom-tab active" data-view="explore">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
        <span>Explore</span>
      </button>
      <button class="bottom-tab" data-view="build">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2L2 7l10 5 10-5-10-5z"/>
          <path d="M2 17l10 5 10-5"/>
          <path d="M2 12l10 5 10-5"/>
        </svg>
        <span>Build</span>
      </button>
    </nav>

    <!-- Progress Drawer -->
    <div class="progress-drawer" id="progress-drawer">
      <div class="drawer-handle" id="drawer-handle">
        <div class="drawer-handle-bar"></div>
      </div>

      <div class="drawer-content">
        <!-- Graduation Progress -->
        <section class="drawer-section">
          <h3 class="drawer-section-title">Graduation Progress</h3>
          <div class="drawer-progress-bar">
            <div class="drawer-progress-fill" id="drawer-progress-fill" style="width: 50%"></div>
          </div>
          <div class="drawer-progress-stats">
            <span class="drawer-cu-value" id="drawer-cu-value">9.5</span>
            <span class="drawer-cu-total">/ 19.0 CU</span>
          </div>
          <div class="drawer-progress-breakdown">
            <div class="breakdown-item">
              <span>Core Curriculum</span>
              <span id="drawer-core-cu">9.5 CU</span>
              <span class="breakdown-status complete">âœ“</span>
            </div>
            <div class="breakdown-item">
              <span>Electives</span>
              <span id="drawer-elective-cu">0.0 CU</span>
              <span class="breakdown-need" id="drawer-elective-need">(need 9.5)</span>
            </div>
            <div class="breakdown-item">
              <span>Block Weeks</span>
              <span id="drawer-block-cu">0.0 CU</span>
              <span class="breakdown-need" id="drawer-block-need">(need 1.0)</span>
            </div>
          </div>
        </section>

        <!-- Target Majors -->
        <section class="drawer-section">
          <div class="drawer-section-header">
            <h3 class="drawer-section-title">Target Majors</h3>
            <button class="drawer-edit-btn" id="drawer-edit-majors">Edit</button>
          </div>
          <div class="drawer-majors-list" id="drawer-majors-list">
            <p class="drawer-empty-state">No target majors selected</p>
          </div>
          <button class="drawer-add-btn" id="drawer-add-major">+ Add Target Major</button>
        </section>

        <!-- Alerts -->
        <section class="drawer-section">
          <div class="drawer-section-header">
            <h3 class="drawer-section-title">Alerts</h3>
            <span class="drawer-alert-badge" id="drawer-alert-badge">0</span>
          </div>
          <ul class="drawer-alerts-list" id="drawer-alerts-list">
            <li class="drawer-alert-item info">No issues detected</li>
          </ul>
        </section>

        <!-- Actions -->
        <section class="drawer-section drawer-actions">
          <button class="drawer-action-btn" id="drawer-settings-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"/>
              <path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"/>
            </svg>
            Settings
          </button>
          <button class="drawer-action-btn" id="drawer-export-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            Export Plan
          </button>
        </section>
      </div>
    </div>

    <!-- Settings Panel (slide-in) -->
    <div class="settings-panel hidden" id="settings-panel">
      <div class="settings-panel-backdrop" id="settings-backdrop"></div>
      <div class="settings-panel-content">
        <div class="settings-header">
          <h3>Settings</h3>
          <button class="settings-close" id="settings-close">&times;</button>
        </div>
        <div class="settings-body">
          <div class="settings-item">
            <label>Cohort</label>
            <button class="settings-cohort-change" id="settings-change-cohort">
              <span id="settings-cohort-name">Philadelphia</span>
              <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                <path d="M3 5l3 3 3-3H3z"/>
              </svg>
            </button>
          </div>
          <div class="settings-item" id="settings-finance-section">
            <label>Finance Option</label>
            <div class="settings-finance-options">
              <button class="settings-finance-btn" data-choice="FNCE-6110">
                <strong>FNCE 6110</strong>
                <span>1.0 CU - Required for Finance major</span>
              </button>
              <button class="settings-finance-btn" data-choice="FNCE-6210">
                <strong>FNCE 6210</strong>
                <span>0.5 CU - Shorter option</span>
              </button>
            </div>
          </div>
          <div class="settings-item settings-danger">
            <button class="settings-danger-btn" id="settings-clear-plan">Clear All Electives</button>
            <button class="settings-danger-btn" id="settings-reset-app">Reset App</button>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Course Detail Modal -->
  <div id="course-modal" class="modal hidden">
    <div class="modal-backdrop" onclick="closeModal()"></div>
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()">&times;</button>
      <div id="modal-body">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>

  <!-- Add Course Modal -->
  <div id="add-course-modal" class="modal hidden">
    <div class="modal-backdrop" onclick="closeAddCourseModal()"></div>
    <div class="modal-content modal-large">
      <button class="modal-close" onclick="closeAddCourseModal()">&times;</button>
      <h2 id="add-course-title">Add Course to Term 4</h2>
      <div id="add-course-list" class="add-course-grid">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>

  <!-- Course Detail Sheet (iOS-style bottom sheet) -->
  <div class="course-sheet hidden" id="course-sheet">
    <div class="sheet-backdrop" id="sheet-backdrop"></div>
    <div class="sheet-content">
      <div class="sheet-handle">
        <div class="sheet-handle-bar"></div>
      </div>
      <div class="sheet-header">
        <div class="sheet-course-dept" id="sheet-course-dept"></div>
        <h2 class="sheet-course-code" id="sheet-course-code">FNCE 7050</h2>
        <h3 class="sheet-course-title" id="sheet-course-title">Investment Management</h3>
        <span class="sheet-course-credits" id="sheet-course-credits">1.0 CU</span>
      </div>
      <div class="sheet-body">
        <div class="sheet-meta">
          <div class="sheet-meta-item">
            <span class="sheet-meta-label">Term</span>
            <span class="sheet-meta-value" id="sheet-course-term">T5</span>
          </div>
          <div class="sheet-meta-item">
            <span class="sheet-meta-label">Professor</span>
            <span class="sheet-meta-value" id="sheet-course-prof">TBD</span>
          </div>
        </div>
        <div class="sheet-section">
          <h4>Description</h4>
          <p class="sheet-description" id="sheet-course-desc"></p>
        </div>
        <div class="sheet-section" id="sheet-prereqs-section">
          <h4>Prerequisites</h4>
          <ul class="sheet-prereqs-list" id="sheet-prereqs-list"></ul>
        </div>
        <div class="sheet-section" id="sheet-majors-section">
          <h4>Counts Toward</h4>
          <div class="sheet-majors-tags" id="sheet-majors-tags"></div>
        </div>
        <div class="sheet-section" id="sheet-conflicts-section">
          <h4>Schedule Conflicts</h4>
          <ul class="sheet-conflicts-list" id="sheet-conflicts-list"></ul>
        </div>
      </div>
      <div class="sheet-footer">
        <button class="sheet-action-btn sheet-add-btn" id="sheet-add-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
          Add to Plan
        </button>
        <button class="sheet-action-btn sheet-remove-btn hidden" id="sheet-remove-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
          Remove from Plan
        </button>
      </div>
    </div>
  </div>

  <!-- Catalog Sheet (for adding courses in Build mode) -->
  <div class="catalog-sheet hidden" id="catalog-sheet">
    <div class="sheet-backdrop" id="catalog-sheet-backdrop"></div>
    <div class="sheet-content catalog-sheet-content">
      <div class="sheet-handle">
        <div class="sheet-handle-bar"></div>
      </div>
      <div class="catalog-sheet-header">
        <h2>Add Course</h2>
        <button class="catalog-sheet-close" id="catalog-sheet-close">&times;</button>
      </div>
      <div class="catalog-sheet-search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
        <input type="text" id="catalog-sheet-search" placeholder="Search available courses...">
      </div>
      <div class="catalog-sheet-filters">
        <select id="catalog-filter-term" class="catalog-filter-select">
          <option value="">All Terms</option>
          <option value="T4">Term 4</option>
          <option value="T5">Term 5</option>
          <option value="T6">Term 6</option>
          <option value="BW">Block Weeks</option>
        </select>
        <select id="catalog-filter-major" class="catalog-filter-select">
          <option value="">All Majors</option>
        </select>
      </div>
      <div class="catalog-sheet-list" id="catalog-sheet-list">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>

  <!-- Onboarding Modal (first-run only) -->
  <div class="onboarding-modal hidden" id="onboarding-modal">
    <div class="onboarding-content">
      <div class="onboarding-step active" id="onboarding-step-1">
        <div class="onboarding-logo">
          <div class="onboarding-shield">W</div>
        </div>
        <h1 class="onboarding-title">WEMBA Pathway Planner</h1>
        <p class="onboarding-subtitle">Plan your journey to graduation</p>

        <div class="onboarding-cohort-cards">
          <button class="onboarding-cohort-card" data-cohort="philadelphia">
            <span class="onboarding-cohort-icon">PHL</span>
            <span class="onboarding-cohort-name">Philadelphia</span>
            <span class="onboarding-cohort-desc">East Coast â€¢ In-Person</span>
          </button>
          <button class="onboarding-cohort-card" data-cohort="san_francisco">
            <span class="onboarding-cohort-icon">SF</span>
            <span class="onboarding-cohort-name">San Francisco</span>
            <span class="onboarding-cohort-desc">West Coast â€¢ In-Person</span>
          </button>
          <button class="onboarding-cohort-card" data-cohort="global">
            <span class="onboarding-cohort-icon">GLO</span>
            <span class="onboarding-cohort-name">Global</span>
            <span class="onboarding-cohort-desc">Virtual â€¢ WAVE</span>
          </button>
        </div>
      </div>

      <div class="onboarding-step" id="onboarding-step-2">
        <div class="onboarding-success-icon">âœ“</div>
        <h2 class="onboarding-title">You're set up!</h2>
        <p class="onboarding-subtitle" id="onboarding-cohort-confirm">Your Philadelphia core curriculum is loaded.</p>
        <p class="onboarding-hint">Start exploring courses or build your pathway.</p>

        <div class="onboarding-actions">
          <button class="onboarding-primary-btn" id="onboarding-start-explore">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="m21 21-4.35-4.35"/>
            </svg>
            Start Exploring
          </button>
          <button class="onboarding-secondary-btn" id="onboarding-start-build">
            or jump to Build
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="data.js"></script>
  <script src="pathway-graph.js"></script>
  <script src="app.js"></script>
</body>
</html>
